// Test the staking implementation. Should not be run in parallel, since
// it uses snapshotting/reverts to rollback.

import * as ethers from "ethers";
import { BigNumber } from "ethers";
import type { BigNumberish } from "ethers";

import * as hre from "hardhat";

import { expect, assert } from "chai";

import { getLatestTimestamp } from "../script-utils";
import { advanceTime, sendEmptyTransaction } from "./test-utils";

const { MaxUint256 } = ethers.constants;

const SevenDays = BigNumber.from(604800);

const stakingTests = [
  //FLY,Seconds,Bonus,Points
  [4919612,266238000,1,1345.4922357072],
  [3866139,2329149600,1,9032.874995800801],
  [260984,644191200,1,170.0177136192],
  [1205451,2528802000,0,3048.346899702],
  [1976524,3435638400,0,6790.621752921599],
  [5982763,2729300400,1,16372.177949754001],
  [8391147,3575401200,0,30001.717053176402],
  [6720325,1004270400,1,6797.7969066],
  [3391308,1626973200,0,5517.5672289456],
  [9686028,1311429600,0,12702.5438256288],
  [9864257,431730000,0,4258.69567461],
  [5287624,3222590400,0,17039.8463412096],
  [5166346,865422000,1,4508.5647607416],
  [988182,742978800,1,741.3701062248001],
  [2096840,979974000,1,2070.066708144],
  [5505714,587534400,1,3274.754641488],
  [2992204,1849554000,0,5534.242877016],
  [2407420,3263799600,0,7857.336433032],
  [4118902,1228032000,1,5088.0368040192],
  [7678979,576889200,1,4485.6510101172],
  [4077267,1587765600,1,6503.3354575943995],
  [8970562,2750432400,0,24672.924371008798],
  [8791654,3412576800,1,30066.000782097602],
  [7736212,2595261600,0,20077.4939330592],
  [9841739,29415600,0,289.5006577284],
  [4986504,405241200,0,2020.7368647648],
  [385661,2776338000,0,1070.725289418],
  [5880795,1660474800,0,9764.911901466001],
  [9227577,3519342000,1,32541.9693571692],
  [3109875,945021600,0,2938.8990483000002],
  [6456650,1914152400,0,12359.01209346],
  [9767711,248716800,1,2500.2839625983997],
  [8690466,1741010400,0,15130.1916868464],
  [6795803,3522956400,0,23941.3176719892],
  [5717116,940748400,1,5419.860270696001],
  [2250018,1742288400,0,3920.1802611912003],
  [5490016,1624809600,1,8960.0750410752],
  [5350267,2629990800,1,14109.983085322801],
  [1394320,1362088800,1,1909.307072448],
  [5085266,100260000,0,509.84876915999996],
  [5163468,2713644000,0,14011.813957392],
  [6003709,1344877200,1,8117.8238679732],
  [9627181,3177496800,1,30660.207049346398],
  [2143701,3493609200,1,7504.8116600268],
  [1525324,1034884800,0,1578.5346226752001],
  [5802299,3483572400,0,20212.7286529476],
  [5237767,415504800,1,2214.3309475608],
  [8490860,2124608400,0,18039.752479224],
  [5461008,2536790400,1,13893.066480384],
  [3002802,807130800,0,2423.6539805016],
  [9557318,2311786800,0,22094.4815958024],
  [4461592,357408000,0,1594.6086735360002],
  [8057039,3281119200,0,26436.105358048797],
  [5556826,2101946400,1,11720.479626504],
  [5640393,3041373600,1,17195.4780800616],
  [4099312,2945919600,0,12076.243567315201],
  [4099793,2305699200,0,9452.8894402656],
  [833075,2562634800,1,2140.91311113],
  [3863338,1894597200,1,7347.507919322399],
  [4054502,2820870000,0,11437.22305674],
  [3103419,483904800,1,1524.2827242455999],
  [3675019,910454400,1,3372.609036528],
  [1990281,1301396400,1,2604.589191774],
  [3095591,2425618800,0,7508.7237267108],
  [4126853,1512766800,0,6242.9662068804],
  [8660149,1356019200,0,11743.328318860798],
  [4116861,1525377600,1,6309.6460821072005],
  [2576589,1262901600,0,3253.9783706424],
  [4005577,1977080400,1,7948.418653025999],
  [6419366,2334459600,1,15032.3397752952],
  [1480124,681588000,1,1019.5769048544],
  [1735355,2798384400,1,4868.784872910001],
  [4807906,2067429600,1,9974.9010370032],
  [5149505,1845360000,1,9540.063594288],
  [6435607,2565133200,0,16508.1891778524],
  [1544268,2827036800,1,4376.9101444992],
  [3751580,3129490800,0,11740.535095464],
  [5536104,107773200,0,596.6436436128],
  [7746123,1002178800,0,7763.0002527924],
  [9550868,1489662000,0,14227.565126615998],
  [4729594,1020528000,0,4826.683105632],
  [9545774,2761938000,0,26364.835950012],
  [1312006,2381832000,0,3124.977874992],
  [1131739,1750107600,1,1988.8787340827998],
  [9805638,3528669600,1,34672.0221175536],
  [3791996,1896998400,0,7193.410344806401],
  [7327095,590238000,1,4377.907023282],
  [8794714,2657401200,0,23371.083537256804],
  [2728732,33537600,0,91.51512232319999],
  [85022,2349698400,1,200.393113032],
  [9113932,975812400,0,8893.4878583568],
  [256230,274507200,0,70.336979856],
  [6868344,1449352800,0,9954.6536077632],
  [2799676,2426223600,1,6812.9589120912],
  [1622358,284389200,1,473.1555191544],
  [9347241,3277911600,1,30707.2682381772],
  [3159309,2533136400,1,8025.889627746],
  [5210403,512823600,1,2709.8326447236],
  [6861272,2615864400,0,17948.1571635168],
  [3781,3272792400,1,12.40186905],
  [8051593,862002000,0,6940.4892691860005],
  [1088813,3208503600,1,3501.3625994556],
  [1581704,2098800,0,3.3196803552],
  [8472863,3592908000,1,30503.709906112803],
  [6806595,470304000,1,3250.5683987519997],
  [538990,3469910400,1,1874.15878032],
  [8138004,3366752400,0,27398.6444982096],
  [4331718,2947694400,0,12768.5808909792],
  [1996157,1238698800,0,2472.6372805116],
  [5746100,539110800,0,3097.78456788],
  [4884869,2500585200,1,12250.483550593199],
  [2910557,2599480800,1,7587.060697288801],
  [7639149,1456624800,1,11182.8157720776],
  [6482250,2969596800,1,19296.7144344],
  [7953586,1956765600,0,15563.303481441599],
  [7270272,1682773200,0,12234.2188783104],
  [1297884,508086000,1,668.8562129424001],
  [6793840,1807534800,0,12280.102225632001],
  [5773707,3431185200,1,19852.5612634596],
  [3431953,506768400,1,1764.113072778],
  [9222738,1343188800,1,12454.813330243198],
  [8138923,1524812400,1,12469.399760610002],
  [1599271,1538485200,1,2472.0616334988],
  [6661987,168976800,1,1174.0712817528001],
  [3287710,1260255600,0,4143.3549386760005],
  [2627962,3107343600,0,8165.9809017432],
  [7018079,1467885600,1,10352.6715139128],
  [5392715,142866000,1,809.573789574],
  [8526901,2153401200,1,18423.723682378804],
  [9962911,2789290800,0,27789.455993518797],
  [1248633,2215692000,0,2766.5861490360003],
  [1780768,3446935200,0,6138.1919022336],
  [1151043,156358800,1,188.3295119052],
  [7870550,1563789600,0,12307.88423628],
  [4532369,2759155200,1,12538.4036159232],
  [3821,699595200,0,2.6731532592],
  [9393997,2611083600,1,24596.689377776398],
  [4530126,3394231200,0,15376.295009131201],
  [2122829,2185761600,0,4639.9981115663995],
  [3879240,651459600,0,2527.1681387040003],
  [3109731,2262927600,1,7059.6652921812],
  [77066,555001200,1,43.331036680800004],
  [6204731,473500800,0,2937.9450922848],
  [500291,2187702000,1,1098.1185332436],
  [8717010,781354800,1,6874.342176924],
  [5127103,2317233600,0,11880.6953422608],
  [9965075,2441088000,0,24325.6250016],
  [9764093,3141219600,0,30671.1603078228],
  [5608718,1197982800,0,6719.1476940504],
  [8716947,3212341200,1,28065.0721008636],
  [4940385,2799129600,0,13828.777888896],
  [9671674,3442608000,0,33295.782285792],
  [4645573,1957471200,0,9093.5753549976],
  [9382855,34970400,0,328.122192492],
  [4218078,3523978800,0,14864.4174487464],
  [8985539,3584005200,1,32269.431948649202],
  [761694,1979697600,0,1507.9237837343999],
  [6853402,1990476000,0,13641.532199352],
  [9073554,1006862400,1,9201.67258248],
  [5711061,2340867600,0,13368.837656523601],
  [9699160,3210667200,0,31140.774879552002],
  [3828852,567007200,0,2170.9866517344003],
  [7012420,2029035600,0,14228.449822151999],
  [9733780,2317244400,0,22555.547195832],
  [7902662,49176000,1,445.97566624320007],
  [9056041,1703754000,0,15429.266077914],
  [4616182,3061587600,0,14132.845570543199],
  [9922240,3095852400,1,30789.8021664],
  [3529436,1820505600,1,6450.9732375552],
  [784939,3044077200,1,2395.1116865772],
  [8110961,2681766000,0,21751.699437126],
  [5250346,3242685600,0,17025.2213692176],
  [7386506,2248117200,1,16659.3394924488],
  [9345666,3119565600,0,29154.4181626896],
  [5776298,1585314000,1,9199.168147936798],
  [6433143,2288390400,1,14768.231861664],
  [3696369,3474468000,1,12869.742574346401],
  [7298801,3421843200,0,24975.3525700032],
  [9331120,340318800,0,3175.5555610559995],
  [1218206,2073484800,0,2525.9316242688],
  [3918791,2640009600,0,10345.6458603936],
  [3451687,153306000,1,554.2152907932],
  [2349385,3346747200,0,7862.797670472],
  [1343782,774975600,1,1051.1508939624],
  [296411,3291534000,0,975.6468844740001],
  [1686540,2086228800,1,3530.7485530559998],
  [8588805,3380554800,1,29097.260080181997],
  [4055118,2593792800,0,10518.1358715504],
  [605353,571730400,0,346.09871283120003],
  [6815957,2839478400,1,19403.230166351997],
  [3241129,1088197200,1,3550.5103204692],
  [4455178,3097278000,1,13831.258705336799],
  [9900291,2481267600,0,24565.271288871598],
  [3218509,1847340000,0,5945.6804160599995],
  [328597,2860218000,0,939.859054146],
  [2457256,2316790800,1,5710.7818751904],
  [5849211,2130807600,0,12463.5432528036],
  [3166457,2958055200,0,9366.5545944264],
  [1713106,1401552000,1,2413.4401786176],
  [2213678,204008400,0,451.6089068952],
  [6636220,1771005600,1,11800.945813104001],
  [2921561,2204089200,1,6460.5845683548005],
  [5530336,1353780000,1,7526.995236633601],
  [6344413,2935612800,0,18624.7400112864],
  [2693487,1205654400,1,3266.962704144],
  [6146588,1781881200,0,10952.4896013456],
  [4244313,2570868000,0,10911.568473684],
  [6278556,2861528400,0,17966.2663049904],
  [5866761,3408001200,0,19993.9285281132],
  [3186182,3334424400,0,10624.0830036408],
  [6220007,2096445600,0,13039.9063071192],
  [2530139,730512000,1,1866.6596379744003],
  [9992786,718452000,0,7179.337087272001],
  [8774984,128584800,1,1192.0148865216],
  [4056972,125985600,1,540.5639315904001],
  [6801923,1251223200,0,8510.7238622136],
  [8482934,1071532800,1,9151.3077630336],
  [7531583,3285838800,0,24747.5676468204],
  [7011616,2829859200,0,19841.886044467203],
  [6765046,670536000,1,4585.304882505599],
  [8941350,3450189600,0,30849.35277996],
  [8218936,29998800,1,306.20796719040004],
  [4481707,1391526000,0,6236.411814882],
  [3534355,3528748800,1,12497.501899871999],
  [2216681,1091322000,1,2435.2005263076],
  [2041010,2488230000,1,5093.315146476],
  [2228774,1788148800,0,3985.3795535711997],
  [9675231,1633874400,1,15878.331201492],
  [2638585,1643954400,1,4356.86321502],
  [7914178,2088302400,0,16527.1969114272],
  [8028989,1167584400,1,9432.793494738],
  [902048,862128000,0,777.680838144],
  [7941748,2652616800,0,21066.4141661664],
  [2178167,3232684800,1,7057.1356175808],
  [1324706,190105200,0,251.83349907119998],
  [9143422,3431671200,0,31377.2179468464],
  [4223815,2205547200,0,9315.823346568],
  [4898270,1515664800,0,7424.135419896],
  [989527,3264278400,0,3230.0916123168],
  [4792102,275007600,0,1317.8644699751999],
  [6349090,1366977600,1,8725.142965968],
  [313168,2250716400,0,704.8523535552],
  [5098617,2115316800,0,10785.190196865598],
  [786345,402793200,0,316.734418854],
  [3284992,3165199200,1,10421.4952083456],
  [3679910,59331600,1,245.042262972],
  [9126573,969217200,1,8911.8685448604],
  [4686183,1241143200,0,5816.2241644056],
  [5050729,2007990000,0,10141.81332471],
  [3055159,3269383200,0,9988.485507928799],
  [9044873,2762938800,0,24990.4305527724],
  [4258690,546022800,1,2356.2497066759997],
  [2704830,1128837600,1,3072.9443798159996],
  [8446452,170222400,1,1499.07630096],
  [9734480,3550723200,0,34564.443975936],
  [8222213,3538681200,0,29095.790565495598],
  [4491720,1865653200,1,8412.590898576],
  [8721233,2480169600,0,21630.1369611168],
  [126938,1306605600,0,165.8579016528],
  [9257516,455814000,0,4219.705398024],
  [9772558,262148400,1,2632.785760548],
  [6405258,3137709600,0,20097.839517076798],
  [14940,312519600,0,4.669042824],
  [5938910,7894800,0,46.886506667999996],
  [4717427,344682000,0,1626.0121732139999],
  [7299657,2295986400,0,16759.9131966648],
  [1357212,1835596800,0,2491.2940041216],
  [1096357,2747325600,1,3020.0065734024],
  [9899487,2728191600,1,27079.543794560403],
  [6394622,1517184000,1,9748.2277930752],
  [5928739,2402438400,0,14243.4302371776],
  [5536348,2925522000,0,16196.707873656002],
  [8915892,2816568000,1,25176.9240764352],
  [9039165,628635600,1,5747.943557178],
  [8762182,215157600,1,1948.8424619664],
  [4196206,1694988000,1,7142.9732001936],
  [4033939,271375200,0,1094.7110029127998],
  [727465,1816858800,1,1326.980836926],
  [1218200,125319600,1,161.50554504],
  [7097669,498027600,0,3534.8350576644],
  [3368352,1481144400,1,5013.461853504001],
  [8906343,2191802400,1,19585.582637580002],
  [9040960,725486400,0,6559.093522943999],
  [392416,1010106000,0,396.381756096],
  [4800563,3177291600,1,15287.629061199601],
  [5352786,2468415600,0,13212.9004658616],
  [3587463,7844400,1,54.177866226],
  [5227204,2622826800,1,13747.987696017599],
  [226689,3209590800,0,727.5789288612],
  [4427644,325688400,0,1442.0322901296001],
  [9582578,2740060800,1,26326.3928588352],
  [1000261,1120600800,1,1128.1527710424],
  [7536901,1412474400,1,10700.379530532],
  [3478565,1097715600,1,3843.721099458],
  [6789335,249663600,1,1744.324095402],
  [4290612,2904962400,0,12464.066532988802],
  [8344209,2025104400,1,16958.453291658],
  [4197395,728690400,0,3058.6014415080003],
  [6847646,3334723200,0,22835.0039815872],
  [200987,3104463600,1,625.4155088244],
  [5454197,88855200,1,524.2181454216001],
  [4631804,1879862400,1,8740.76996448],
  [1200693,1712991600,0,2056.7770231788],
  [5287224,3457054800,0,18278.223107875197],
  [1306192,1429434000,0,1867.115255328],
  [773001,2438010000,0,1884.58416801],
  [4380592,2300191200,1,10107.991753689601],
  [3873725,23374800,1,118.66149369],
  [2361248,2319105600,1,5493.1204532736],
  [1449988,2284239600,1,3322.6434420336],
  [488228,1445634000,1,709.3423600847999],
  [3072133,1312563600,0,4032.3699501588003],
  [6750812,1492945200,1,10127.5870646736],
  [1494592,221313600,0,330.7735360512],
  [1502723,145652400,1,229.78137393],
  [5149854,2341926000,0,12060.576978804],
  [6937140,1664676000,1,11598.437453904],
  [684175,3545632800,0,2425.83332094],
  [2087888,3169166400,0,6616.8644965632],
  [3502173,417060000,1,1486.0336421447998],
  [1766222,3532597200,0,6239.3508917784],
  [1252276,2542683600,1,3193.2301661712],
  [5133358,1849201200,1,9529.8676326504],
  [2549764,2561443200,0,6531.0756594048],
  [2252212,208022400,1,484.85619936000006],
  [3865000,489423600,1,1919.6728380000002],
  [5380282,1796518800,0,9665.777762301599],
  [6121907,397335600,1,2476.8819432324],
  [6261524,2269198800,1,14254.0863835536],
  [7347130,2255770800,0,16573.441317804],
  [550953,3505615200,1,1935.4278077784],
  [6738210,2212754400,1,14958.90705852],
  [7862368,196822800,0,1547.4932843904],
  [7745158,885189600,0,6855.9333119568],
  [2818023,755719200,1,2150.0861708664],
  [2235775,672001200,1,1518.66984357],
  [2005856,1344592800,0,2697.0595354368],
  [5946059,2976534000,0,17698.646779506],
  [3670217,646297200,0,2372.0509704923998],
  [3365093,3316618800,0,11160.7307075484],
  [6577601,2166771600,1,14299.8966399492],
  [1271399,2258712000,0,2871.724178088],
  [9882784,1755597600,0,17350.191871718398],
  [465643,2952306000,1,1378.1000733948],
  [5999081,1393783200,0,8361.4183132392],
  [3415444,207853200,1,734.6988911952],
  [8799064,2121037200,0,18663.1420691808],
  [5404248,1586066400,0,8571.496170067201],
  [6748260,2513430000,0,16961.2791318],
  [2126841,3340656000,1,7120.4799089376],
  [7345444,3213900000,0,23607.5224716],
  [3351618,1854428400,1,6239.660307948],
  [8815222,183430800,1,1680.9605788248],
  [6634016,960825600,1,6422.279438131201],
  [5942085,1877331600,0,11155.263940386],
  [1398571,266079600,1,382.2814811412],
  [6823141,3474169200,0,23704.746309457198],
  [5133684,1942920000,1,10011.5955422784],
  [7068449,1581202800,1,11227.9513259196],
  [644998,1229061600,0,792.7422738768],
  [990496,641851200,0,635.7510461951999],
  [5569074,1136293200,0,6328.1009164968],
  [8548810,859489200,0,7347.609867851999],
  [1274955,3265495200,1,4172.612546124],
  [7767778,2761509600,0,21450.7935176688],
  [3249378,3165580800,1,10309.751294515201],
  [3533281,2129025600,0,7522.4457009935995],
  [7640278,1920430800,0,14672.6251917624],
  [4880178,2500221600,1,12236.944827297599],
  [6293423,620683200,0,3906.2219265936],
  [2868063,720982800,0,2067.8240923164003],
  [7460420,325310400,1,2481.09695856],
  [3511487,1552842000,1,5478.269464105199],
  [4885370,3236979600,0,15813.843028452002],
  [9324522,2277824400,0,21239.6237299368],
  [862860,2535544800,1,2194.0824788639998],
  [1622761,3142515600,1,5111.3291078052],
  [8516612,3110133600,1,26549.6113026144],
  [9816834,2295795600,1,22608.6909575688],
  [2037844,867114000,1,1781.8329188304],
  [3830437,3492291600,0,13377.002959429201],
  [8378840,1877144400,1,15789.102853679999],
  [7174477,2078658000,0,14913.284011866],
  [1475810,2326370400,1,3443.99153868],
  [1081495,3468488400,1,3759.00192027],
  [9638335,1873504800,1,18127.418066603997],
  [3415631,1015758000,1,3494.2437968436],
  [5752160,2913364800,1,16799.887344384002],
  [6517611,1658858400,0,10811.7937552824],
  [1783793,1085709600,1,1949.6272405896],
  [8381085,2979219600,0,24969.092701266003],
  [876153,2006791200,0,1758.2561302536],
  [9919007,237081600,0,2351.6140499712],
  [2679448,3504535200,1,9409.6661943744],
  [14467,1499734800,1,21.801659050799998],
  [8389014,2733872400,0,22934.493837813603],
  [9528106,2783692800,1,26592.4712519424],
  [3150710,3544545600,0,11167.835267376],
  [5766989,315939600,0,1822.0201978644],
  [9197832,3114586800,1,28714.2003213408],
  [4818702,1086336000,0,5234.729455872],
  [5855008,3099477600,0,18147.4661438208],
  [6172515,3080163600,1,19057.153668318],
  [3684296,2435515200,0,8973.1589092992],
  [9550833,1079791200,0,10312.905426069601],
  [2639791,1450886400,1,3849.195407904],
  [5799217,3319282800,0,19249.2412415676],
  [3515057,2447496000,0,8603.087947271999],
  [2713876,3163302000,1,8604.505605009601],
  [3553890,1120669200,0,3982.735063188],
  [2446929,2093256000,0,5122.048810824],
  [4399839,2876050800,0,12654.1604758212],
  [716493,3158816400,1,2268.469858482],
  [2475831,3268062000,0,8091.169209522],
  [7352742,1633255200,1,12062.2673660976],
  [8637849,3417012000,1,29578.323740090396],
  [2368526,231948000,0,549.3748686480001],
  [62835,3556800000,0,223.49152800000002],
  [9696699,2963880000,1,28810.2269947824],
  [6504512,129297600,1,888.2249370624],
  [5114445,3328610400,1,17061.113413260002],
  [6938068,26791200,1,236.2328897184],
  [445134,2124273600,0,945.5864046624],
  [507788,3428503200,0,1740.9527829216001],
  [219675,2151874800,1,474.30740997],
  [9202083,924080400,0,8503.4645394732],
  [6012606,691012800,1,4198.424796662401],
  [7444793,1213592400,1,9088.97553405],
  [1815630,1367474400,1,2496.00466116],
  [1903567,2091441600,0,3981.1992121872],
  [8408123,3490938000,1,29413.258882858798],
  [2757128,512859600,0,1414.0195632288],
  [5897067,1309964400,0,7724.9478344148],
  [64254,2304493200,0,148.0729060728],
  [5377465,469893600,0,2526.836387724],
  [1076638,992854800,1,1076.7590141112],
  [9821802,1516449600,1,14965.550424374402],
  [2441363,2167833600,1,5310.1871773056],
  [4792421,898826400,1,4342.335989364],
  [6885073,2087982000,0,14375.908492686],
  [1987620,1941721200,1,3873.829242456],
  [2652150,311353200,0,825.75538938],
  [2509234,2197882800,1,5533.2132664536],
  [1414547,2335849200,1,3314.4346946196],
  [4112763,573490800,1,2388.4805318292],
  [2135744,1497639600,0,3198.5747898624],
  [477262,2873966400,1,1375.098728688],
  [538875,1658952000,1,897.8786982],
  [7783827,2848093200,1,22225.556651511604],
  [6879899,414151200,1,2899.2499817112],
  [3837280,2370891600,1,9125.624362175999],
  [4026638,1143165600,0,4603.114045252801],
  [4958556,3124569600,1,15529.3405535232],
  [129393,1319050800,0,170.6759401644],
  [5872616,417232800,0,2450.2480170047997],
  [1547093,1969254000,0,3046.619078622],
  [3034609,3138984000,1,9547.6130755344],
  [9224951,281476800,0,2596.6096876368],
  [240271,1992045600,1,480.3745791672],
  [2365265,3598146000,1,8527.734945954002],
  [9098888,2140290000,1,19540.295087068804],
  [1845046,2958465600,0,5458.5051214176],
  [7926272,77425200,1,671.2189065216],
  [4458383,3225265200,1,14411.8246986324],
  [1089970,2885400000,1,3152.9100042719997],
  [1397714,2926900800,1,4101.1142738976],
  [1053988,477396000,0,503.169655248],
  [5178274,3411450000,1,17703.004678682402],
  [4781436,2287461600,1,10972.0529927712],
  [9175635,196441200,1,1869.065838738],
  [5261704,3268483200,1,17235.9784703232],
  [1580621,408142800,1,656.5905956483999],
  [4220045,3165886800,1,13390.812159498],
  [5472553,1905613200,1,10468.2868351524],
  [9023516,223444800,1,2081.7467976384],
  [5510257,2349842400,0,12948.235533496802],
  [9649155,2249769600,0,21708.375584687998],
  [4868638,22514400,0,109.6144633872],
  [9777151,2467504800,0,24125.1670228248],
  [9344156,1952125200,0,18240.962400331202],
  [3997028,3117250800,0,12459.738730622399],
  [6619580,2914578000,0,19293.28223724],
  [3310390,3136654800,1,10407.576169835998],
  [4787277,1244707200,0,5958.7581502944],
  [4602008,3018816000,0,13892.615382528002],
  [5501911,1867608000,1,10315.3436681616],
  [2208965,1844618400,0,4074.6974839560003],
  [5778360,699699600,0,4043.1161806560003],
  [1396375,2268810000,1,3178.24389495],
  [9391793,2942128800,0,27631.8646689384],
  [4974108,502131600,0,2497.6568086128],
  [9571961,3500607600,0,33507.6794235036],
  [3820339,84366000,1,350.0332124004],
  [847460,416883600,1,359.442701352],
  [9959599,3321259200,1,33150.6925927632],
  [2360159,327110400,1,789.1616445119998],
  [4298763,705369600,1,3063.4154401536],
  [2522092,3375586800,1,8531.8447984848],
  [2411160,1543363200,1,3738.794848128],
  [1937121,2788707600,0,5402.0640548196],
  [7559474,748328400,1,5711.832721764],
  [4529285,3431890800,1,15576.883260894],
  [4421741,2133421200,1,9465.527217790801],
  [481878,2172243600,1,1050.2536792536002],
  [7156805,2818893600,0,20174.271810948],
  [1674651,3496813200,0,5855.9417221932],
  [1250008,59878800,1,83.92103709119999],
  [2926852,407700000,0,1193.2775603999999],
  [116236,2332879200,0,271.1645466912],
  [2045495,3276169200,0,6701.387717753999],
  [5447017,182246400,1,1032.231509568],
  [1919226,1892408400,0,3631.9594038984],
  [96100,1400047200,1,135.24199127999998],
  [538940,705016800,0,379.961754192],
  [6892538,739630800,0,5097.9333949704005],
  [5187651,1633658400,0,8474.8496324184],
  [9779836,3404372400,1,33365.18189268],
  [9253394,1667347200,1,15495.7780086912],
  [4318478,3059791200,0,13213.6409817936],
  [9097221,2365754400,0,21521.790608522402],
  [6796238,1961521200,1,13380.2892941544],
  [431757,1587808800,1,688.6810836648001],
  [2485865,1398096000,0,3475.4779130399997],
  [7403410,1083524400,0,8021.775378204],
  [6647291,1934312400,1,12906.180786870002],
  [685294,497174400,0,340.71063327359997],
  [3104103,198712800,1,639.3533365512],
  [439916,3319552800,1,1463.5171239264],
  [1910818,3261016800,1,6245.0775524592],
  [1188678,126421200,1,158.9010486264],
  [9150030,1971687600,1,18107.407948355998],
  [2858615,1695438000,0,4846.604498369999],
  [65710,1235343600,0,81.174427956],
  [3595573,126907200,1,482.39933243039997],
  [1372323,1155315600,1,1595.4259415436],
  [8589248,1336554000,1,11542.3310976768],
  [8232833,1558670400,0,12832.273105243201],
  [3683824,1390719600,1,5149.9019608128],
  [6165877,1806591600,0,11139.2215948332],
  [8652551,3466087200,0,29990.4962684472],
  [9923199,1698253200,1,16924.123065049203],
  [2442669,752904000,0,1839.095260776],
  [1549285,2821564800,1,4382.652111984],
  [4600326,1522828800,0,7005.5089221888],
  [9452686,3523370400,1,33373.917866808],
  [2011632,618768000,1,1259.3331297792001],
  [4913495,756964800,0,3719.3427599760003],
  [3117448,3557707200,0,11090.9671952256],
  [2272058,138157200,1,330.3908596584],
  [4169125,707155200,1,2978.4762648],
  [7322147,600624000,1,4450.9984337952],
  [9283618,1343109600,0,12468.9164585328],
  [5732410,2578741200,1,14824.005381108],
  [1372156,56185200,1,87.05341867679999],
  [3911499,1628899200,1,6399.825687043201],
  [2581448,2301958800,1,5961.122057347199],
  [4157410,2242656000,1,9353.813299776],
  [9369596,9410400,1,156.17242612799998],
  [5824958,3423996000,0,19944.632892168],
  [720648,1509444000,1,1093.0079746367999],
  [4277499,1112738400,1,4790.7817700040005],
  [9094915,1988701200,1,18153.075629501996],
  [2457356,2782702800,0,6838.0914217968],
  [7483982,32864400,0,245.9565780408],
  [4961582,475048800,1,2393.0027527248],
  [8841877,880664400,1,7850.897109594],
  [8519863,1607896800,0,13699.0604541384],
  [1177186,2398784400,1,2832.358957812],
  [1238251,2426695200,0,3004.8577580952],
  [6399494,27237600,0,174.3068577744],
  [4564016,3455589600,0,15771.3662238336],
  [9771162,2604092400,0,25445.0087033688],
  [4470277,949075200,1,4275.0725201856],
  [491752,2615241600,0,1286.0502872832],
  [4072482,1834009200,1,7498.5259001976],
  [8588991,2128777200,0,18284.048211805202],
  [791217,783673200,0,620.0555582844],
  [9167059,1889409600,0,17320.3292783664],
  [1869295,2440972800,1,4576.464845568],
  [7789813,2719569600,1,21241.4739713136],
  [4297152,3461040000,0,14872.61495808],
  [3059812,2704525200,1,8297.5455528336],
  [1418390,2372158800,1,3374.940427596],
  [3469210,894222000,1,3127.422043116],
  [6166765,1943445600,0,11984.772305484],
  [7528031,658292400,0,4955.645594264401],
  [6228841,2233324800,0,13911.0250805568],
  [362933,1012359600,1,370.05272924760004],
  [6763026,489801600,1,3361.6242931392],
  [2046399,2897089200,0,5928.600441790801],
  [9462429,3136798800,0,29681.735932285203],
  [1374683,3555936000,0,4888.284768287999],
  [7438576,1752469200,0,13035.8753318592],
  [5748881,2527131600,1,14569.901918485199],
  [5397130,3455154000,0,18647.91530802],
  [5842189,2641280400,1,15473.259569681999],
  [8517787,2947298400,1,25166.278687571998],
  [5819849,1220547600,1,7145.6408654148],
  [1968806,385664400,1,773.5871911319999],
  [8737357,759117600,0,6632.681476183199],
  [9340973,190850400,1,1850.521479084],
  [9292656,2981329200,0,27704.4666783552],
  [4819878,1986850800,1,9611.359206775202],
  [750718,3226348800,1,2427.5265293952],
  [7966533,1011934800,0,8061.6119780484],
  [6065930,1378364400,1,8405.08605846],
  [5393609,627843600,0,3386.3428915524],
  [5639831,3246566400,1,18351.017463744003],
  [7969183,2369012400,1,18936.93048741],
  [2053895,2268687600,0,4659.646118202],
  [6084608,54943200,1,378.46748528640006],
  [839448,2745871200,0,2305.0160870976],
  [7272959,2099217600,0,15267.5235368784],
  [1639394,2457698400,1,4041.034076664],
  [3869040,3350628000,1,12991.793701824],
  [3914404,920624400,0,3603.6958338576],
  [5480855,2687313600,1,14768.554034376],
  [8442270,1815224400,0,15324.614495388],
  [9482283,2567797200,1,24417.3983541084],
  [9289510,2037477600,0,18927.168539976003],
  [963450,711817200,0,685.8002813400001],
  [1766039,2903104800,0,5126.9962978872],
  [7077500,1775124000,0,12563.44011],
  [3817820,2751847200,1,10533.765487535999],
  [9075465,3214544400,0,29173.485193146003],
  [8568651,1359691200,1,11712.907202068802],
  [1028531,1802811600,1,1861.7122843452],
  [4307129,1098360000,0,4730.77820844],
  [6607859,852454800,0,5632.901122273201],
  [6089962,2127664800,0,12957.397780737601],
  [7805508,3382088400,1,26455.567317768],
  [5704284,38869200,0,221.7209556528],
  [6481890,884894400,1,5782.83112728],
  [8537089,3548620800,1,30356.850373977602],
  [2354990,436503600,1,1045.053188388],
  [483060,278175600,1,137.881361592],
  [5471680,2227287600,1,12226.716279936001],
  [1559874,2268835200,1,3550.4179803071997],
  [4513272,3347506800,1,15140.9642331168],
  [1460796,1267380000,0,1851.38363448],
  [143585,2733012000,1,393.46161051599995],
  [3666231,516736800,0,1894.4764750008],
  [977219,2041462800,0,1994.9562359532001],
  [3684644,1332291600,1,4935.7619224848],
  [7278805,2236755600,0,16280.907845058],
  [5096968,2179202400,0,11107.324898323199],
  [5036989,883170000,1,4485.074026496401],
  [3787711,860076000,0,3257.719326036],
  [8183498,1765616400,1,14508.310833252],
  [6691708,2116357200,0,14162.0444060976],
  [1414024,874915200,0,1237.1510907648],
  [1967715,1268179200,1,2509.6961229119997],
  [3188977,736657200,0,2349.1828676843998],
  [6937954,190915200,0,1324.5608755008],
  [3010907,1593676800,1,4820.2645915008],
  [9576357,622782000,0,5963.982765174],
  [1730279,308228400,0,533.3211277236001],
  [1191610,639111600,1,770.220002412],
  [2857673,3392982000,1,9716.772898450801],
  [2363335,2402136000,0,5677.052083559999],
  [24339,1507640400,1,36.871102422],
  [9097420,983710800,1,9015.255741528],
  [4951999,2024618400,0,10025.9082921816],
  [3831027,3383488800,0,12962.2369469976],
  [6294369,243655200,1,1579.3377500231998],
  [6865308,423716400,0,2908.9435906512003],
  [5239822,3512991600,1,18445.4792036424],
  [2930192,3569104800,1,10479.428493580801],
  [3167374,2065122000,0,6541.013729628],
  [3517805,1617303600,0,5689.358690598],
  [4575851,2440976400,0,11169.5443009164],
  [6922536,1046232000,1,7292.8196816256],
  [2807816,471391200,0,1323.5797536192001],
  [7998545,41878800,1,393.019706538],
  [9896623,3044894400,0,30134.171951611203],
  [7375146,2349608400,1,17382.230852435998],
  [5051043,1773345600,1,8993.903329137598],
  [4138152,2955110400,0,12228.696011980799],
  [3498743,1747314000,0,6113.4026263020005],
  [9856158,58219200,0,573.8176338336001],
  [9039736,3104413200,0,28063.0757629152],
  [5745287,2641813200,0,15177.9750343884],
  [4993846,1271980800,1,6388.3195668864],
  [1945800,494776800,0,962.7366974400001],
  [5820450,1479348000,0,8610.471066600001],
  [4934124,1748376000,1,8662.5138809664],
  [8430666,1248418800,1,10586.1883324824],
  [4234732,3305494800,1,14028.6185963568],
  [7571057,1985479200,1,15087.123898797601],
  [8128250,2002294800,1,16334.144295299999],
  [4466113,3516084000,0,15703.228461492],
  [2675195,1933160400,0,5171.581036277999],
  [2308948,1004353200,1,2335.7567334384003],
  [701349,1317765600,1,929.3036962968],
  [7930002,3401377200,0,26972.927998754403],
  [3864277,3506166000,1,13576.842008737201],
  [4448951,3099434400,0,13789.231773314401],
  [5298844,2390468400,0,12666.719138529601],
  [3987346,3404808000,1,13605.0861218976],
  [9525335,561679200,0,5350.182542531999],
  [5534968,1915452000,1,10642.136109292802],
  [2837730,2600143200,1,7399.099472184],
  [2470391,2205133200,1,5465.4703208028],
  [8574759,1050080400,1,9066.418531542],
  [2316634,2043162000,1,4750.0717596264],
  [1979499,1581958800,1,3145.8522745836003],
  [9911481,662493600,1,6638.226293527199],
  [6450661,1426014000,1,9245.5492125276],
  [272274,3194449200,1,871.7415172632],
  [6324787,1412182800,0,8931.7554150636],
  [7486913,2954271600,0,22118.3744475708],
  [5963850,3579267600,0,21346.21507626],
  [8360243,1213261200,0,10143.158454471599],
  [5516023,1339311600,1,7427.7066782916],
  [3670987,2987856000,1,10995.023089123199],
  [2645298,1494997200,0,3954.7131031656],
  [6962402,759322800,1,5337.2409101207995],
  [8131566,3439746000,1,28029.537275637602],
  [8665723,2192630400,1,19063.620039023997],
  [4399190,2381022000,1,10506.495733524001],
  [8491709,2085678000,1,17772.6000709404],
  [525157,1447956000,1,764.2156085352001],
  [1041534,12726000,0,13.254561684],
  [1419983,3587526000,0,5094.225932058],
  [3367003,3041949600,0,10242.2534290488],
  [4421056,2473462800,1,10967.4038087424],
  [3630632,419007600,1,1547.6120756064001],
  [8983075,578520000,1,5262.08411412],
  [5577011,822499200,1,4627.5628009248],
  [3822050,1401336000,0,5355.9762588],
  [487288,1165935600,1,571.6829680415999],
  [3888112,2408198400,0,9363.345097420799],
  [7481882,310359600,1,2376.3744115704],
  [6924058,140860800,0,975.3283491264],
  [6060635,1483322400,0,8989.875653724],
  [2152240,135392400,0,291.396938976],
  [8518400,2064909600,0,17589.72593664],
  [1663973,858121200,1,1439.9669579724],
  [8575779,1172624400,0,10056.167704407599],
  [9215773,3444267600,0,31741.5883528548],
  [5405134,687326400,0,3715.0912937375997],
  [7006787,793242000,1,5608.9301907852],
  [7274086,609292800,0,4432.0482263808],
  [3759766,1863590400,1,7033.950701568],
  [4554780,771814800,1,3548.5033860720005],
  [386115,2951841600,0,1139.750319384],
  [9130935,1301716800,0,11885.891489208],
  [7653393,390474000,1,3043.9962433187998],
  [3775426,191955600,0,724.7141630856],
  [693370,95400000,0,66.147498],
  [2751375,1568332800,1,4335.040036799999],
  [9129962,905918400,0,8271.0005671008],
  [2511661,2627935200,0,6600.4823523672],
  [8937758,328154400,1,2997.831286296],
  [5596176,378806400,0,2119.8672843264],
  [851572,2642569200,1,2256.5183077296],
  [9612731,848696400,1,8228.055550374],
  [2692264,1957795200,1,5290.4409115392],
  [5610563,2360786400,0,13245.340826743199],
  [2623084,2856088800,0,7491.7608338592],
  [8840286,2894835600,0,25591.174626981603],
  [8762939,1678705200,0,14710.391266582801],
  [4806566,3134116800,0,15064.3392509088],
  [2321926,512290800,0,1189.5013280808],
  [1425823,2575350000,1,3682.3413160548],
  [5331099,3235694400,1,17288.498164248],
  [3494742,2370204000,1,8308.6149069072],
  [5597498,2530724400,0,14165.724767551199],
  [8063887,1200477600,0,9680.5157124312],
  [6629025,3288981600,1,21850.85206278],
  [3572642,3425122800,1,12262.666377016802],
  [5870289,2294737200,0,13470.770543050801],
  [8461992,723110400,1,6180.368173055999],
  [721603,2009948400,1,1455.621901218],
  [4495892,2356567200,1,10627.501007721601],
  [8475594,3561994800,1,30251.5342259256],
  [1898545,2033622000,0,3860.92287999],
  [8091190,2310757200,0,18696.775549068003],
  [6108843,1673424000,0,10222.684488432],
  [1616269,2269778400,1,3680.3026986840005],
  [5987881,1045983600,0,6263.2253247516],
  [607736,1290121200,0,784.0530976032],
  [3642384,2306840400,0,8402.3985635136],
  [6245972,140151600,0,875.3829693552],
  [5151096,2762442000,0,14229.603936431999],
  [7956803,3331857600,0,26510.9345472528],
  [9748269,1385373600,1,13575.743555392799],
  [9398957,1926367200,1,18174.0563493336],
  [5496081,1205254800,1,6664.0663639044005],
  [7922285,2206292400,0,17478.877186134],
  [6884519,3543656400,0,24396.369815271602],
  [9017248,768132000,0,6926.4367407360005],
  [877197,2175098400,0,1907.9897911848],
  [453414,1377579600,0,624.6138767543999],
  [7970801,141397200,1,1184.8978284947998],
  [1115049,3221222400,0,3591.8208158976],
  [122598,357350400,0,43.8104443392],
  [5847656,1004428800,1,5915.9940470784],
  [6510064,2824941600,0,18390.5506122624],
  [6208488,1029409200,1,6436.1333877984],
  [5667421,1090832400,1,6223.33832589],
  [4895800,365904000,1,1826.9245612799998],
  [3746141,382294800,0,1432.1302243668001],
  [6435002,1860710400,0,11973.6751454208],
  [4177109,1398780000,0,5842.85652702],
  [4860057,654332400,1,3215.36511063],
  [8269326,936478800,1,7804.0639496664],
  [3941522,3121671600,1,12332.7432782424],
  [6220225,568105200,1,3578.88607263],
  [5621864,1084276800,0,6095.656707955201],
  [5365599,323384400,0,1735.1510132556],
  [9693758,3480422400,1,33808.72590144],
  [7594539,3242469600,1,24680.1799597608],
  [8977515,1840334400,1,16586.784893879998],
  [6520276,264837600,1,1774.1358022752],
  [4597459,1107082800,0,5089.7677826051995],
  [1297371,1841857200,0,2389.5721174212],
  [5276623,507949200,0,2680.2564315516],
  [4090932,3183793200,0,13024.6814832624],
  [3108217,715147200,1,2245.3908802416],
  [6936942,3299637600,1,22939.740202478402],
  [7052352,35848800,0,252.8183563776],
  [3597098,780915600,0,2809.0299429288],
  [9721409,2116904400,1,20649.847584257997],
  [7430894,3379201200,1,25164.4163781672],
  [6924305,2322687600,0,16082.997362118002],
  [9768156,1258776000,1,12366.813706041601],
  [7967377,1477717200,1,11831.354067099599],
  [9488285,1287050400,1,12280.76318178],
  [8737796,2751782400,0,24044.5132475904],
  [1961523,1212091200,1,2391.7807162224003],
  [3507865,2682514800,1,9435.358459926],
  [2330511,2497834800,0,5821.2314775828],
  [3486433,3248971200,0,11327.3204077296],
  [9347149,1365246000,0,12761.157783654],
  [4152545,3555464400,0,14764.225916898002],
  [5040572,1460764800,0,7363.0901494656],
  [9958554,212382000,1,2187.2928171384],
  [6756477,1946916000,0,13154.293174932],
  [2855978,354776400,1,1033.961139252],
  [1158504,3270074400,1,3796.802231328],
  [839286,682056000,1,578.5312540896],
  [8797949,2630926800,0,23146.7598091332],
  [8615196,932104800,1,8092.791191030399],
  [9641438,1560618000,0,15046.601688683999],
  [6651199,2020748400,1,13488.671479194],
  [2955003,735339600,0,2172.9307240188],
  [5531759,1605085200,1,8919.0917949852],
  [2514682,2569687200,0,6461.9461474704],
  [8216518,3430832400,0,28189.4961695832],
  [4311657,464994000,1,2036.1869169011998],
  [6617392,726940800,1,4858.478618572801],
  [8510626,391672800,1,3395.1474344304],
  [2619632,1846180800,0,4836.3143014656],
  [7426288,176752800,0,1312.6171976064],
  [20998,900392400,0,18.9064396152],
  [7183750,201225600,0,1445.554404],
  [3468597,1300161600,0,4509.7366252752],
  [1829193,179046000,0,327.509689878],
  [2806310,2295925200,0,6443.077848012],
  [1859123,3502972800,1,6525.950071939199],
  [197733,862995600,1,172.0777759956],
  [5454882,591750000,0,3227.9264235],
  [4368284,2719515600,0,11879.616483230398],
  [7617683,542448000,1,4187.4830041248],
  [9667576,1061182800,1,10329.228768470399],
  [6803688,3020796000,1,20601.9319416768],
  [1296005,1853427600,0,2402.051436738],
  [5863660,1552719600,0,9104.619809736],
  [9342088,2692911600,0,25157.4171434208],
  [8760615,3165382800,0,27730.700038422],
  [9067630,2060960400,1,18753.835583340002],
  [8275985,583660800,0,4830.368025888],
  [4438895,2378257200,0,10556.833993794],
  [1907208,1187258400,1,2278.190471328],
  [2412767,416595600,1,1022.6590138044],
  [2893819,1619082000,0,4685.330254158],
  [6176585,471718800,0,2913.611264298],
  [1049274,2389942800,1,2515.3200525096],
  [2883223,550890000,0,1588.33871847],
  [6477531,1867003200,0,12093.5711050992],
  [9889663,1881518400,0,18607.5829042992],
  [9448620,1668099600,1,15829.813547063999],
  [8886894,2913372000,0,25890.828146568],
  [1161451,3256743600,1,3790.9774577412],
  [1883307,3196666800,0,6020.3049611076],
  [2457197,2357859600,0,5793.7255355412],
  [9993585,448711200,1,4556.762960148],
  [3244657,1554552000,1,5067.5364513072],
  [6577790,1782342000,1,11771.610352884],
  [5547705,3988800,0,22.128685704],
  [4115743,1108551600,0,4562.513487838801],
  [2208435,2634343200,0,5817.775724892],
  [7401264,812527200,0,6013.7283143808],
  [5803974,663501600,0,3850.9460353584004],
  [313727,446680800,1,142.41273241680003],
  [415445,3146734800,1,1310.310372618],
  [6871385,2028790800,1,13990.472435033998],
  [3056632,3256376400,0,9953.5443082848],
  [1308131,3482960400,1,4565.662362558],
  [5654314,3196576800,1,18115.4857016016],
  [1167282,1812441600,0,2115.6304557312],
  [944842,488538000,0,461.591220996],
  [7928204,1800673200,1,14333.644200283203],
  [9122912,3210084000,1,29351.524290739202],
  [9767568,236721600,1,2383.0834265856],
  [6459680,3176236800,0,20517.473332224],
  [1597306,2931350400,1,4693.856190048001],
  [6455250,60804000,0,392.505021],
  [3771999,223473600,1,870.3178556688],
  [6238530,616744800,1,3892.857692472],
  [4865206,1787191200,0,8695.0533493872],
  [4492679,2806714800,0,12609.668640949201],
  [6045242,92844000,0,561.264448248],
  [8236533,3368523600,0,27744.9557926788],
  [6432815,687186000,0,4420.54040859],
  [6828819,3494134800,0,23860.8141108012],
  [8443609,3459769200,0,29212.9383550428],
  [8361167,3207776400,1,26881.436184678],
  [1925114,429458400,0,826.7563782576],
  [9877887,1000202400,1,9951.57603702],
  [9489381,1359334800,1,12968.115955304402],
  [9255483,466063200,1,4380.8126179464],
  [3855510,1276081200,1,4947.9255767879995],
  [6479961,868388400,0,5627.1229648523995],
  [5734557,1271631600,0,7292.2438932012],
  [9197448,3565598400,0,32794.4058728832],
  [3137810,2441635200,0,7661.387346912],
  [2494773,2604567600,0,6497.8049251548],
  [6298774,2225005200,1,14060.518885807202],
  [5133525,2266624800,0,11635.775076420001],
  [6357243,962082000,0,6116.189059926],
  [9322827,213843600,1,2061.2882370924],
  [8345853,3168018000,1,26500.383392086802],
  [1129538,1909519200,1,2165.0722331184],
  [2616398,170546400,0,446.2172598672],
  [7815231,1212350400,0,9474.7984289424],
  [1017152,3157635600,1,3219.1774481663997],
  [2967367,927864000,0,2753.313014088],
  [5585778,2660770800,0,14862.474997682399],
  [688328,568918800,1,396.59834905919996],
  [5498485,884487600,1,4903.247606022001],
  [3920328,2211987600,1,8700.169096425601],
  [1494916,1906977600,1,2861.6208282432003],
  [7110412,17395200,0,123.6870388224],
  [5277624,745002000,0,3931.8404352479997],
  [7667764,492800400,0,3778.6771663055997],
  [2214877,2142367200,1,4761.1545281496],
  [2528927,344073600,0,870.1370170272],
  [9603844,2916442800,0,28009.0616861232],
  [918807,1550502000,0,1424.612091114],
  [4831087,2751206400,0,13291.3174733568],
  [106053,1517061600,1,161.6586241176],
  [9988037,2169255600,1,21739.0943725884],
  [2044416,3261517200,1,6682.7355015168],
  [512081,2244999600,1,1153.3381192332001],
  [277393,1353326400,1,377.416477512],
  [1458288,139255200,1,213.6578580864],
  [3010986,1433059200,1,4336.7737203648],
  [2428134,3363681600,1,8185.092083452801],
  [5682402,2239563600,0,12726.1006797672],
  [8934053,3019294800,1,27039.3795488772],
  [3508079,2791699200,0,9793.5013378368],
  [6607652,1523678400,1,10115.892322272],
  [149418,3037402800,1,454.9270676472],
  [6821968,981982800,0,6699.0552381504],
  [901978,2421072000,0,2183.753680416],
  [3921969,2243019600,0,8797.0533375924],
  [3633387,99230400,0,360.5424453648],
  [2776966,1638032400,0,4548.7602816984],
  [5941720,1799114400,0,10689.834012768],
  [5914598,3169022400,1,18786.41933544],
  [3001215,847159200,1,2564.2885164120003],
  [8078603,1283234400,0,10366.7412735432],
  [3855278,392713200,0,1514.0185602696],
  [1772293,1007028000,0,1784.748675204],
  [381591,917107200,1,352.7292883968],
  [8279449,2762060400,1,22928.427145782],
  [6593340,401752800,0,2648.892806352],
  [3235895,758696400,0,2455.061887278],
  [9183623,1671008400,1,15412.562237717999],
  [7622308,3178256400,0,24225.649183771202],
  [194555,2537488800,1,495.09313585200005],
  [1158631,217350000,1,260.2373281956],
  [5042482,663786000,0,3347.128956852],
  [346816,1765756800,1,614.9097621504],
  [5867326,2789377200,1,16408.7680745448],
  [5786861,2302632000,0,13325.011318152],
  [9113047,2903407200,1,26525.025123645595],
  [7326057,2691565200,0,19718.5600744164],
  [7372824,367531200,1,2763.2518595712],
  [1572172,3198790800,1,5040.4595251248],
  [650419,492098400,1,324.790630164],
  [3641982,280364400,0,1021.0820982408],
  [3681490,3212031600,0,11825.062215083999],
  [4640929,2573100000,0,11941.5744099],
  [5110453,3312615600,1,16966.0559545596],
  [3004211,3252531600,0,9771.2912105676],
  [3633013,426877200,0,1550.8504170036],
  [8951309,914133600,1,8247.6573410808],
];

const TestTokenName = "Test Token";

const within5PctErr = (line: number, x_: number, y_: number) => {
  const x = x_;
  const y = Math.floor(y_);
  const b = Math.max(x, y) * 0.05;
  return Math.abs(x - y) <= b;
};

const withSnapshot = async (k: () => Promise<void>) => {
  const snapshotId = await hre.network.provider.request({
    method: "evm_snapshot",
    params: []
  });

  await k();

  await hre.network.provider.request({
    method: "evm_revert",
    params: [snapshotId]
  });
};

describe("StakingV1", async () => {
  let signer: ethers.Signer;

  let signerAddr: string;

  let testToken: ethers.Contract;
  let stakingContract: ethers.Contract;

  let flyContract: ethers.Contract;

  before(async function() {
    const stakingContractFactory = await hre.ethers.getContractFactory("StakingV1");
    stakingContract = await stakingContractFactory.deploy();

    const testTokenFactory = await hre.ethers.getContractFactory("TestGovToken");
    testToken = await testTokenFactory.deploy(TestTokenName, "TT", 6, MaxUint256);

    await stakingContract.init(
      testToken.address, // fly token
      "0x0000000000000000000000000000000000000000", // zero since we don't use the merkle
      "0x0000000000000000000000000000000000000000", // zero since no emergency
      "0x0000000000000000000000000000000000000000", // zero for no operator
    );

    await testToken.approve(stakingContract.address, MaxUint256);

    ({ signer } = testToken);

    signerAddr = await signer.getAddress();
  });

  it("cant stake too little", async () => {
    await expect(stakingContract.stake(0)).to.be.revertedWith("too little fly");
  });

  it("can stake some", async () => {
    await withSnapshot(async () => {
      const amountStaked = 1000 * 1e6;
      expect(await stakingContract.callStatic.stake(amountStaked)).to.be.equal(amountStaked);
      await stakingContract.stake(amountStaked);
      let { flyStaked } = await stakingContract.stakingDetails(signerAddr)
      expect(flyStaked).to.be.equal(amountStaked);
      await advanceTime(hre, 1000); // advance time by 1000 seconds
      await sendEmptyTransaction(signer);
      let points: BigNumber;
      ({ flyStaked, points } = await stakingContract.stakingDetails(signerAddr));
      expect(flyStaked).to.be.equal(amountStaked);
      expect(points).to.be.equal(1000);
    });
  });

  it("cant double down on unstaking an amount, can only unstake an amount once", async () => {
    await withSnapshot(async () => {
      const amountStaked = 18281 * 1e6;
      expect(await stakingContract.callStatic.stake(amountStaked)).to.be.equal(amountStaked);
      await stakingContract.stake(amountStaked);
      let { flyStaked } = await stakingContract.stakingDetails(signerAddr)
      expect(flyStaked).to.be.equal(amountStaked);
      await stakingContract.beginUnstake(amountStaked);
      const { flyStaked: curFlyStaked } = await stakingContract.stakingDetails(signerAddr);
      expect(curFlyStaked).to.be.equal(0);
      const amountUnstaking = await stakingContract.amountUnstaking(signerAddr);
      expect(amountUnstaking).to.be.equal(flyStaked);
      // second attempt, should break
      await expect(stakingContract.callStatic.beginUnstake(amountStaked))
        .to.be.revertedWith("no fly unstaked");
    });
  });

  it("cant stake for someone else", async () => {
  });

  it("staking for someone else is fine as merkle", async () => {
  });

  it("stake then unstake 0 doesnt cause weirdness", async () => {
    await withSnapshot(async () => {
      const amountStaked = BigNumber.from(41554 * 1e6);
      // simulate first
      expect(await stakingContract.callStatic.stake(amountStaked)).to.be.equal(amountStaked);
      // then send on-chain to continue the life of the testing
      await stakingContract.stake(amountStaked);
      expect(await stakingContract.stakedPositionsLen(signerAddr)).to.be.equal(1);
      let { flyStaked } = await stakingContract.stakingDetails(signerAddr);
      expect(flyStaked).to.be.equal(amountStaked);
      const { flyRemaining } = await stakingContract.callStatic.beginUnstake(0);
      await stakingContract.beginUnstake(0);
      expect(flyRemaining).to.be.equal(0);
      ({ flyStaked } = await stakingContract.stakingDetails(signerAddr));
      expect(flyStaked).to.be.equal(amountStaked);
    });
  });

  it("stake, have a certain number of points in the future, begin unstaking, dont have the same points", async () => {
    withSnapshot(async () => {
      // stake first
      const amountStaked = BigNumber.from(4454545* 1e6);
      expect(await stakingContract.callStatic.stake(amountStaked))
        .to.be.equal(amountStaked);

      await stakingContract.stake(amountStaked);
      expect(await stakingContract.stakedPositionsLen(signerAddr))
        .to.be.equal(1);

      // now wait a seeminly random amount of time, get the points
      const waitTime = 444035535989;
      await advanceTime(hre, waitTime);
      await sendEmptyTransaction(signer);
      const curPoints = stakingContract.balanceOf(signerAddr);
      const { points: curPoints1 } =
        await stakingContract.stakingDetails(signerAddr);
      expect(curPoints).to.be.equal(curPoints1);

      // begin to unstake finally
      const { flyRemaining, unstakedBy } =
        await stakingContract.callStatic.beginUnstake(amountStaked);
      await stakingContract.beginUnstake(amountStaked);
      expect(flyRemaining).to.be.equal(0);

      // check the points are not the same, and that they're 0
      expect(await stakingContract.balanceOf(signerAddr)).to.be.equal(0);
      const { points: curPoints2 } =
        await stakingContract.stakingDetails(signerAddr);
      expect(curPoints2).to.be.equal(0);
    })
  });

  it("stake, have a certain number of points in the future, begin unstaking, unstake fully, dont have the same amount of points", async () => {
    await withSnapshot(async () => {
      // first, stake an arbitrary amount.
      const stakeAmount = BigNumber.from(
        // random number i chose
        "51317253906870152199262132321886643552971805669285596207895276767218547159680"
      );
      expect(await stakingContract.callStatic.stake(stakeAmount)).to.be.equal(stakeAmount);
      await stakingContract.stake(stakeAmount);
      // wait a couple of seconds to simulate a real user with real points.
      const firstDelaySeconds = 9603965;
      await advanceTime(hre, firstDelaySeconds);
      let { flyStaked, points } = await stakingContract.stakingDetails(signerAddr);
      // ensure that the fly staked has remained the same.
      expect(flyStaked).to.be.equal(stakeAmount);

      // second, begin to unstake. check that the points after beginning are 0, as well as the FLY.
      const unstakeAmount = stakeAmount.add(100);
      const { flyRemaining: unstakeFlyRemaining } =
        await stakingContract.callStatic.beginUnstake(unstakeAmount);
      console.log("we did the unstake");
      // since we didn't take the full amount, 100 is enough.
      expect(unstakeFlyRemaining).to.be.equal(100);

      // thirdly, begin the unstaking process.
      await stakingContract.beginUnstake(unstakeAmount);
      await stakingContract.beginUnstake(unstakeAmount);
      ({ flyStaked, points } = await stakingContract.stakingDetails(signerAddr));
      // make sure that the points are 0.
      expect(flyStaked).to.be.equal(0);
      expect(points).to.be.equal(0);
      // make sure that the FLY that we're about to receive is recorded as being there.
      const amountUnstaking = await stakingContract.amountUnstaking(signerAddr);
      expect(amountUnstaking).to.be.equal(stakeAmount);

      // fourthly, attempt to unstake before the time. make sure nothing happens.
      await expect(stakingContract.callStatic.finaliseUnstake()).to.be.revertedWith("no fly returned");

      // finally, advance time, and finalise the withdraw.
      const unlockSeconds = SevenDays.add(1000);
      const secondsUntilFullyUnstaked = await stakingContract.secondsUntilFullyUnstaked(signerAddr);
      expect(secondsUntilFullyUnstaked).to.lt(unlockSeconds);
      await advanceTime(hre, unlockSeconds);
      await sendEmptyTransaction(signer); // advance time
      expect(await stakingContract.callStatic.finaliseUnstake()).to.be.equal(stakeAmount);
      await stakingContract.finaliseUnstake();
      ({ flyStaked, points } = await stakingContract.stakingDetails(signerAddr));
      expect(flyStaked).to.be.equal(0);
      expect(points).to.be.equal(0);
    });
  });

  it("can unstake fully one position, leaving a few positions left", async () => {
    await withSnapshot(async () => {
      const s1 = BigNumber.from(41554 * 1e6);
      expect(await stakingContract.callStatic.stake(s1)).to.be.equal(s1);
      await stakingContract.stake(s1);
      let { flyStaked } = await stakingContract.stakingDetails(signerAddr);

      const s2 = BigNumber.from(17279899).mul(1e6);
      expect(await stakingContract.callStatic.stake(s2)).to.be.equal(s2);
      await stakingContract.stake(s2);
      ({ flyStaked } = await stakingContract.stakingDetails(signerAddr));
      expect(flyStaked).to.be.equal(s1.add(s2));

      const s3 = BigNumber.from(172 * 1e6);
      expect(await stakingContract.callStatic.stake(s3)).to.be.equal(s3);
      await stakingContract.stake(s3);
      ({ flyStaked } = await stakingContract.stakingDetails(signerAddr));
      expect(flyStaked).to.be.equal(s1.add(s2).add(s3));

      /*
       * unstake half of the second amount, and test that the time is correct,
       * as well as the new amount staked.
       */

      const flyUnstake1 = s2.div(2);
      let { flyRemaining } = await stakingContract.callStatic.beginUnstake(flyUnstake1);
      await stakingContract.beginUnstake(flyUnstake1);

      // the timestamp test isn't reliable, so we don't bother.
      //expect(await getLatestTimestamp(hre)).to.be.equal(unstakedBy.sub(604800));
      expect(flyRemaining).to.be.equal(0);

      // the amount of positions remaining should be equal to 2 since we
      // closed the newest position.
      expect(await stakingContract.stakedPositionsLen(signerAddr)).to.be.equal(2);

      ({ flyStaked } = await stakingContract.stakingDetails(signerAddr));
      expect(flyStaked).to.be.equal(s1.add(s2.sub(flyUnstake1)).add(s3));

      /*
       * unstake more than the second amount, this time the entire first position as well.
       */

      const flyUnstake2 = s2.sub(flyUnstake1).add(s1);
      ({ flyRemaining } = await stakingContract.callStatic.beginUnstake(flyUnstake2));

      await stakingContract.beginUnstake(flyUnstake2);
      expect(flyRemaining).to.be.equal(0);

      ({ flyStaked } = await stakingContract.stakingDetails(signerAddr));
      expect(flyStaked).to.be.equal(s3);
      expect(await stakingContract.stakedPositionsLen(signerAddr)).to.be.equal(1);

      /*
       * unstake just 1 this time.
       */

      const flyUnstake3 = 1;
      ({ flyRemaining } = await stakingContract.callStatic.beginUnstake(flyUnstake3));

      await stakingContract.beginUnstake(flyUnstake3);
      expect(flyRemaining).to.be.equal(0);

      ({ flyStaked } = await stakingContract.stakingDetails(signerAddr));
      expect(flyStaked).to.be.equal(s3.sub(1));
      expect(await stakingContract.stakedPositionsLen(signerAddr)).to.be.equal(1);
    });
  });

  it("should support staking with the permit router just fine", async () => {
    const chainId = await hre.network.provider.send("eth_chainId");
    const nonce = 0;

    const permitAmount = MaxUint256;
    const deadline = MaxUint256;

    // create the signature for testing the permit approval version of
    // the stake UX.

    const sig = await hre.network.provider.send(
      "eth_signTypedData_v4",
      [signerAddr, JSON.stringify({
        domain: {
          name: TestTokenName,
          version: "1",
          chainId: chainId,
          verifyingContract: testToken.address
        },

        primaryType: "Permit",

        types: {
          EIP712Domain: [
            { name: "name", type: "string" },
            { name: "version", type: "string" },
            { name: "chainId", type: "uint256" },
            { name: "verifyingContract", type: "address" },
          ],
          Permit: [
            { name: "owner", type: "address" },
            { name: "spender", type: "address" },
            { name: "value", type: "uint256" },
            { name: "nonce", type: "uint256" },
            { name: "deadline", type: "uint256" },
          ]
        },

        message: {
          owner: signerAddr,
          spender: stakingContract.address,
          value: permitAmount.toHexString(),
          nonce: nonce,
          deadline: deadline.toHexString(),
        }
      })]
    );

    const { r, s, v } = hre.ethers.utils.splitSignature(sig);

    const flyStaked = await stakingContract.callStatic.stakePermit(
      permitAmount, // fly amount
      deadline,
      v,
      r,
      s
    );

    expect(flyStaked).to.be.equal(permitAmount);
  });

  it("every automated test we created works", async () => {
    for (let i = 0; i < stakingTests.length; i++) {
      const [fly, seconds, isBonus, expectedPoints] = stakingTests[i];
      const points = await stakingContract.calculatePointsAddSecs(seconds, {
        receivedBonus: !!isBonus,
        flyVested: fly,
        depositTimestamp: 0 // we can set this to 0 for this function.
      });
      assert(within5PctErr(i, points, expectedPoints), `line ${i}, points are ${points}, expected ${expectedPoints}, seconds passed are ${seconds}`);
    }
  });
});
